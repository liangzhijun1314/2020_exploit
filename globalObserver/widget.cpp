#include "widget.h"
#include "globalObserver.h"
#include <QMessageBox>
#include <QPushButton>

Widget::Widget(QWidget *parent)
    : QWidget(parent)
{
    globalObserver::getGlobalObserver()->attach("haha", this, SLOT(haha()));
    globalObserver::getGlobalObserver()->attach("hehe", this, SLOT(hehe()));

    QPushButton *p = new QPushButton("haha", this);
    connect(p, SIGNAL(clicked()), this, SLOT(onHaha()));
    p->setGeometry(10, 10, 200, 40);
}

Widget::~Widget()
{
    globalObserver::getGlobalObserver()->detach("haha", this);
    globalObserver::getGlobalObserver()->detach("hehe", this);
}

void Widget::haha()
{
    QMessageBox::about(this, "", "haha");

}

void Widget::hehe()
{
    QMessageBox::about(this, "", "hehe");
}

void Widget::onHaha()
{
    globalObserver::getGlobalObserver()->notify("haha");
}
